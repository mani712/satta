<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .active-page {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .circle-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .circle-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <!-- Navigation Component -->
    <nav class="bg-white shadow-md py-4 px-6 flex justify-between items-center">
        <div class="flex items-center">
            <div
                class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold mr-3">
                GM
            </div>
            <h1 class="text-xl font-bold text-purple-700">Game Manager</h1>
        </div>
        <div>
            <button id="homeBtn"
                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md transition duration-300">
                Home
            </button>
        </div>
    </nav>

    <!-- Home Page Component -->
    <div id="homePage" class="page active-page">
        <div class="container mx-auto px-4 py-10">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Game Dashboard</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Manage your games efficiently with our comprehensive dashboard.
                    Create new games, check history, view results and more.
                </p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                <!-- Circular Buttons -->
                <div class="flex flex-col items-center">
                    <button onclick="showPage('createGamePage')"
                        class="circle-button w-32 h-32 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Create Game</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        Create a new game with custom parameters
                    </p>
                </div>

                <div class="flex flex-col items-center">
                    <button
                        class="circle-button w-32 h-32 bg-gradient-to-r from-green-500 to-teal-600 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Game History</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        View your previously created games
                    </p>
                </div>

                <div class="flex flex-col items-center">
                    <button
                        class="circle-button w-32 h-32 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Results</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        Check results of completed games
                    </p>
                </div>

                <div class="flex flex-col items-center">
                    <button
                        class="circle-button w-32 h-32 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Statistics</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        View statistical analysis of games
                    </p>
                </div>

                <div class="flex flex-col items-center">
                    <button
                        class="circle-button w-32 h-32 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Players</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        Manage players and their profiles
                    </p>
                </div>

                <div class="flex flex-col items-center">
                    <button
                        class="circle-button w-32 h-32 bg-gradient-to-r from-gray-700 to-gray-900 rounded-full flex items-center justify-center text-white text-center mb-3">
                        <span class="font-bold text-lg">Settings</span>
                    </button>
                    <p class="text-gray-700 text-center">
                        Configure application settings
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Game Form Component -->
    <div id="createGamePage" class="page">
        <div class="container mx-auto px-4 py-10 max-w-2xl">
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">
                        Create New Game
                    </h2>
                    <p class="text-gray-600">
                        Fill in the details to create a new game
                    </p>
                </div>

                <form id="gameForm" class="space-y-6">
                    <div>
                        <label for="game_name" class="block text-sm font-medium text-gray-700 mb-1">Game Name</label>
                        <select id="game_name"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="single_patti">Single Patti</option>
                            <option value="jodi" selected>Jodi</option>
                            <option value="single_pana">Single Pana</option>
                            <option value="double_pana">Double Pana</option>
                            <option value="tripple_pana">Tripple Pana</option>
                            <option value="half_sangam">Half Sangam</option>
                            <option value="full_sangam">Full Sangam</option>
                        </select>
                    </div>

                    <div>
                        <label for="start_date" class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                        <input type="date" id="start_date"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" />
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="start_time" class="block text-sm font-medium text-gray-700 mb-1">Start Time
                                (Optional)</label>
                            <input type="time" id="start_time"
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" />
                        </div>

                        <div>
                            <label for="end_time" class="block text-sm font-medium text-gray-700 mb-1">End Time
                                (Optional)</label>
                            <input type="time" id="end_time"
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" />
                        </div>
                    </div>

                    <div>
                        <label for="game_data" class="block text-sm font-medium text-gray-700 mb-1">Game Data</label>
                        <input type="text" id="game_data" placeholder="111-23-456/214-34-525"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" />
                        <p class="text-xs text-gray-500 mt-1">
                            Format: XXX-XX-XXX/XXX-XX-XXX
                        </p>
                    </div>

                    <div class="flex justify-between pt-4">
                        <button type="button" onclick="showPage('homePage')"
                            class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition duration-300">
                            Cancel
                        </button>
                        <button type="submit"
                            class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-300">
                            Create Game
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        api_url = 'https://satta-admin.onrender.com';
        // Set today's date as default for the start_date field
        document.addEventListener('DOMContentLoaded', function () {
            const today = new Date();
            const yyyy = today.getFullYear();
            let mm = today.getMonth() + 1;
            let dd = today.getDate();

            if (dd < 10) dd = '0' + dd;
            if (mm < 10) mm = '0' + mm;

            const formattedToday = `${yyyy}-${mm}-${dd}`;
            document.getElementById('start_date').value = formattedToday;

            // Set up navigation
            document.getElementById('homeBtn').addEventListener('click', function () {
                showPage('homePage');
            });

            // Handle form submission
            document.getElementById('gameForm').addEventListener('submit', function (e) {
                e.preventDefault();

                // Get form values
                const gameName = document.getElementById('game_name').value;
                const startDate = document.getElementById('start_date').value;
                const startTime = document.getElementById('start_time').value + ':00';
                const endTime = document.getElementById('end_time').value + ':00';
                const gameData = document.getElementById('game_data').value;

                const game = {
                    game_name: gameName,
                    start_date: startDate,
                    start_time: startTime,
                    end_time: endTime,
                    game_data: gameData
                }

                // Validate game data format
                if (gameData && !isValidGameData(gameData)) {
                    alert('Please enter game data in the correct format: XXX-XX-XXX');
                    return;
                }

                // Create success message
                let successMessage = `Game "${document.getElementById('game_name').options[document.getElementById('game_name').selectedIndex].text}" created successfully!`;

                if (startTime) successMessage += `\nStart Time: ${startTime}`;
                if (endTime) successMessage += `\nEnd Time: ${endTime}`;

                // POST request using fetch()
                console.log(game);
                fetch(api_url + '/game', {    
                    method: "POST",              
                    body: JSON.stringify(game), 
                    headers: {
                        "Content-Type": "application/json"
                    },
                }).then(response => response.json())
                .then(json => {
                    console.log(json);
                    alert(successMessage);
                    showPage('homePage');
                });
         
                
            });
        });

        // Function to validate game data format
        function isValidGameData(gameData) {
            const pattern = /^\d{3}-\d{2}-\d{3}$/;
            return pattern.test(gameData);
        }

        // Function to show/hide pages
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active-page');
            });
            document.getElementById(pageId).classList.add('active-page');

            // Scroll to top when changing pages
            window.scrollTo(0, 0);
        }
    </script>
</body>

</html>